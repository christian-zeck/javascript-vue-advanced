<script>
  let price = 5
  let quantity = 2
  let total = 0
  let target = null
  let storage = []

  target = () => { total = price * quantity }
  record = () => { storage.push(target) }
  replay = () => { storage.forEach(run => run()) }

  record();
  target()

  console.log(total);

  price = 10;
  replay();
  console.log(total);

  price = 30;
  replay();
  console.log(total);
</script>